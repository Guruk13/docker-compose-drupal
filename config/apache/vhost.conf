<VirtualHost *:80>
  ServerName localhost
  ServerAlias drupal.dev

  DocumentRoot "/var/www/localhost/drupal/web"
  DirectoryIndex /index.php index.php

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php)$ fcgi://php:9000/var/www/localhost/drupal/web/$1
      ProxyTimeout 300
  </IfModule>

</VirtualHost>

<VirtualHost *:443>
  ServerName localhost:443
  ServerAlias drupal.dev:443

  DocumentRoot "/var/www/localhost/drupal/web"

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php)$ fcgi://php:9000/var/www/localhost/drupal/web/$1
      ProxyTimeout 300
  </IfModule>

  <IfModule ssl_module>
    SSLEngine on
    SSLCertificateFile /etc/ssl/apache2/server.crt
    SSLCertificateKeyFile /etc/ssl/apache2/server.key
    SSLVerifyClient none

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory "/var/www/localhost/cgi-bin">
        SSLOptions +StdEnvVars
    </Directory>
  </IfModule>

</VirtualHost>

# Dashboard.
<VirtualHost *:8181>
  ServerName localhost:8181
  ServerAlias dashboard.local

  DocumentRoot /var/www/dashboard
  # DirectoryIndex /index.php index.php
  <Directory />
      Options FollowSymlinks
      DirectoryIndex index.php
      AllowOverride All
      Require all granted
  </Directory>

  <IfModule proxy_module>
      ProxyPassMatch ^/(fpm-ping|fpm-status) fcgi://php:9000
      ProxyPassMatch ^/(.*\.php)$ fcgi://php:9000/var/www/dashboard/$1
  </IfModule>
</VirtualHost>
